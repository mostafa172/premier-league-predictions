<div class="leaderboard-container">
  <div class="leaderboard-header">
    <h2>Leaderboard</h2>
    <button
      (click)="refreshLeaderboard()"
      class="refresh-btn"
      [disabled]="loading"
    >
      ğŸ”„ Refresh
    </button>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="loading" class="loading-message">Loading leaderboard...</div>

  <div *ngIf="currentUsername && currentUserRank > 0" class="current-user-rank">
    <h3>Your Position: #{{ currentUserRank }}</h3>
  </div>

  <div *ngIf="!loading && leaderboard.length > 0" class="leaderboard-table">
    <table>
      <thead>
        <tr>
          <th>Rank</th>
          <th>Username</th>
          <th>Points</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let entry of leaderboard; trackBy: trackByUserId"
          [class.current-user]="entry.username === currentUsername"
        >
          <td class="rank">
            <span class="rank-number">{{ entry.rank }}</span>
            <span *ngIf="entry.rank === 1" class="trophy">ğŸ¥‡</span>
            <span *ngIf="entry.rank === 2" class="trophy">ğŸ¥ˆ</span>
            <span *ngIf="entry.rank === 3" class="trophy">ğŸ¥‰</span>
          </td>

          <td>
            <div class="username">
              <span>{{ entry.username }}</span>
              <span *ngIf="entry.username === currentUsername" class="you-label"
                >You</span
              >
            </div>
          </td>

          <td class="points">
            <span class="points-number">{{ entry.totalPoints || 0 }}</span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!loading && leaderboard.length === 0" class="no-data">
    No leaderboard data available yet.
  </div>
</div>
